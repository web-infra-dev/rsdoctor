# å¿«é€Ÿå¼€å§‹

æœ¬æ–‡æ¡£å°†ä»‹ç»å¦‚ä½•æ¥å…¥ Rsdoctor èƒ½åŠ›ã€‚

## ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

import { PackageManagerTabs } from '@theme';

### Rspack é¡¹ç›®

åŸºäº Rspack æˆ– Rsbuild çš„é¡¹ç›®ï¼Œå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsdoctor/rspack-plugin -D" />

### Webpack é¡¹ç›®

åŸºäº Webpack çš„é¡¹ç›®ï¼Œå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsdoctor/webpack-plugin -D" />

---

## ç¬¬äºŒæ­¥ï¼šæ³¨å†Œæ’ä»¶

ä¾èµ–å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­æ¥å…¥ Rsdoctor æ’ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§å·¥å…·å’Œæ¡†æ¶çš„ç¤ºä¾‹ï¼š

### Rspack é¡¹ç›®

åœ¨ `rspack.config.js` çš„ [plugins](https://www.rspack.dev/config/plugins.html#plugins) ä¸­åˆå§‹åŒ– RsdoctorRspackPlugin æ’ä»¶ï¼Œå‚è€ƒï¼š

```js title="rspack.config.js"
const { RsdoctorRspackPlugin } = require('@rsdoctor/rspack-plugin');

module.exports = {
  // ...
  plugins: [
    // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
    process.env.RSDOCTOR &&
      new RsdoctorRspackPlugin({
        // æ’ä»¶é€‰é¡¹
      }),
  ].filter(Boolean),
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

### Rsbuild é¡¹ç›®

åœ¨ `rsbuild.config.ts` çš„ [tools.rspack](https://rsbuild.dev/config/tools/rspack) ä¸­åˆå§‹åŒ– RsdoctorWebpackPlugin æ’ä»¶ï¼Œå‚è€ƒï¼š

```js title="rsbuild.config.ts"
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

export default {
  // ...
  tools: {
    rspack(config, { appendPlugins }) {
      // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
      if (process.env.RSDOCTOR) {
        appendPlugins(
          new RsdoctorRspackPlugin({
            // æ’ä»¶é€‰é¡¹
          }),
        );
      }
    },
  },
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

### Webpack é¡¹ç›®

åœ¨ `webpack.config.js` çš„ [plugins](https://webpack.js.org/configuration/plugins/#plugins) ä¸­åˆå§‹åŒ– RsdoctorWebpackPlugin æ’ä»¶ï¼Œå‚è€ƒï¼š

```js title="webpack.config.js"
const { RsdoctorWebpackPlugin } = require('@rsdoctor/webpack-plugin');

module.exports = {
  // ...
  plugins: [
    // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
    process.env.RSDOCTOR &&
      new RsdoctorWebpackPlugin({
        // æ’ä»¶é€‰é¡¹
      }),
  ].filter(Boolean),
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

### Modern.js é¡¹ç›®

åœ¨ `modern.config.ts` çš„ [tools.bundlerChain](https://modernjs.dev/configure/app/tools/rspack) ä¸­åˆå§‹åŒ–æ’ä»¶ï¼Œå‚è€ƒï¼š

```ts title="modern.config.ts"
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

export default {
  // ...
  tools: {
    rspack(config, { appendPlugins }) {
      // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
      if (process.env.RSDOCTOR) {
        appendPlugins(
          new RsdoctorRspackPlugin({
            // æ’ä»¶é€‰é¡¹
          }),
        );
      }
    },
  },
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

:::tip
å¯¹äºä½¿ç”¨ Modern.js Webpack æ¨¡å¼çš„é¡¹ç›®ï¼Œè¯·ä½¿ç”¨ [tools.webpack](https://modernjs.dev/configure/app/tools/webpack) æ³¨å†Œ `RsdoctorWebpackPlugin` æ’ä»¶ã€‚
:::

---

## ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ„å»º

ç°åœ¨ä½ å¯ä»¥åœ¨é¡¹ç›®å†…æ‰§è¡Œ **build** å‘½ä»¤ï¼Œåœ¨å®Œæˆæ„å»ºåï¼ŒRsdoctor ä¼šè‡ªåŠ¨æ‰“å¼€æœ¬æ¬¡æ„å»ºçš„åˆ†æé¡µé¢ã€‚

```bash
# å¼€å¯ Rsdoctor
RSDOCTOR=true npm run build

# æœªå¼€å¯ Rsdoctor
npm run build
```

:::tip
Rsdoctor æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚
:::

## ğŸ“¢ æ³¨æ„

### Next.js é¡¹ç›®

åœ¨ `next.config.js` çš„ [Webpack Config](https://nextjs.org/docs/app/api-reference/next-config-js/webpack) ä¸­åˆå§‹åŒ– RsdoctorWebpackPlugin æ’ä»¶ã€‚

#### 1. Next.js é¡¹ç›®æŠ¥å‘Šé¡µé¢é—®é¢˜

è¯¦æƒ…æŸ¥çœ‹ï¼š[FAQ](../more/faq#nextjs)

#### 2. Next.js ä¸­ä¸æ”¯æŒå¯¹ rules è¿›è¡Œé‡å†™çš„ Loader åˆ†æ

è¯¦æƒ…æŸ¥çœ‹ï¼š[FAQ](../more/faq#nextjs)
