# MCP Server

## ä»‹ç»

@rsdoctor/mcp-server æ˜¯ä¸€ä¸ª MCP Serverï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·æ›´ä¾¿æ·åœ°ä½¿ç”¨ Rsdoctor çš„æ„å»ºæ•°æ®ã€‚å®ƒå¯ä»¥ä¸ Rsdoctor çš„æœ¬åœ°æ„å»ºåˆ†ææ•°æ®é…åˆä½¿ç”¨ï¼Œé€šè¿‡é—®ç­”çš„å½¢å¼ï¼Œå¸®åŠ©ä½ å¿«é€Ÿè·å–æ„å»ºåˆ†æç»“æœã€‚

## ä¸»è¦åŠŸèƒ½

**@rsdoctor/mcp-server** æä¾›å››å¤§ç±»æ ¸å¿ƒåˆ†æèƒ½åŠ›ï¼š

- **äº§ç‰©ä¿¡æ¯åˆ†æ**: åˆ†ææ„å»ºäº§ç‰©çš„ä½“ç§¯ã€ç»„æˆç­‰ä¿¡æ¯
- **ä¾èµ–é—®é¢˜åˆ†æ**: åˆ†æé¡¹ç›®ä¾èµ–å…³ç³»ã€é‡å¤ä¾èµ–ã€Tree Shaking ç­‰é—®é¢˜
- **äº§ç‰©ä¼˜åŒ–å»ºè®®**: æä¾›äº§ç‰©ä½“ç§¯ä¼˜åŒ–ã€ä»£ç åˆ†å‰²ç­‰å»ºè®®
- **ç¼–è¯‘ä¼˜åŒ–å»ºè®®**: åˆ†æç¼–è¯‘è€—æ—¶ï¼Œæä¾›ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–å»ºè®®

## ä½¿ç”¨ç¤ºä¾‹

### 1. äº§ç‰©ä¼˜åŒ–åˆ†æ

é€šè¿‡æé—® "Please help me to optimize the bundle or artifacts"ï¼Œå·¥å…·ä¼šåˆ†ææ„å»ºäº§ç‰©å¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®ã€‚

ç¤ºä¾‹è§†é¢‘:

<video
  src="https://lf3-static.bytednsdoc.com/obj/eden-cn/lognuvj/rsdoctor/docs/mcp-bundle-optimize-2.mp4"
  style={{
    width: '100%',
    height: 'auto',
    maxHeight: '50vh',
    objectFit: 'cover',
    display: 'block',
  }}
  autoPlay={true}
  muted={true}
  controls={true}
  loop={true}
  playsInline
/>

### 2. ä¾èµ–åˆ†æ

é€šè¿‡æé—® "Please investigate the referrer dependency of node_modules/dayjs/index.js"ï¼Œå·¥å…·ä¼šåˆ†ææŒ‡å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚

ç¤ºä¾‹è§†é¢‘:

<video
  src="https://lf3-static.bytednsdoc.com/obj/eden-cn/lognuvj/rsdoctor/docs/issuer-path.mp4"
  style={{
    width: '100%',
    height: 'auto',
    maxHeight: '50vh',
    objectFit: 'cover',
    display: 'block',
  }}
  autoPlay={true}
  muted={true}
  controls={true}
  loop={true}
  playsInline
/>

### 3. ç¼–è¯‘æ€§èƒ½åˆ†æ

é€šè¿‡æé—® "Please help me find files or loaders with high compilation time and provide optimization suggestions"ï¼Œå·¥å…·ä¼šåˆ†æç¼–è¯‘è€—æ—¶å¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®ã€‚

ç¤ºä¾‹è§†é¢‘:

<video
  src="https://lf3-static.bytednsdoc.com/obj/eden-cn/lognuvj/rsdoctor/docs/loader-mcp.mp4"
  style={{
    width: '100%',
    height: 'auto',
    maxHeight: '50vh',
    objectFit: 'cover',
    display: 'block',
  }}
  autoPlay={true}
  muted={true}
  controls={true}
  loop={true}
  playsInline
/>

### 4. Tree shaking é—®é¢˜

é€šè¿‡æé—® "Please help me to check why react-dom/client.js can not be tree-shaken?"ï¼Œå·¥å…·ä¼šå¸®å¿™åˆ†æè¯¥æ¨¡å—æ²¡æœ‰è¢« Tree shaking çš„åŸå› ã€‚

> æ³¨æ„ï¼šè¯·ä½¿ç”¨ 1.1.5 åŠä»¥ä¸Šç‰ˆæœ¬çš„ Rsdoctor æ’ä»¶ã€‚

<img
  src="https://assets.rspack.rs/others/assets/rsdoctor/tree-shake-mcp.png"
  alt="tree-shaking"
/>

## å¿«é€Ÿå¼€å§‹

### ğŸ’¡ ç‰ˆæœ¬è¦æ±‚

:::warning
éœ€è¦ä½¿ç”¨ä»¥ä¸‹ rsdoctor æ’ä»¶ï¼ˆç‰ˆæœ¬è¦æ±‚ï¼‰ï¼š

- @rsdoctor/rspack-plugin >= 1.1.2
- @rsdoctor/webpack-plugin >= 1.1.2

æ³¨æ„ï¼šè¯·ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³ä½“éªŒã€‚
:::

### 1. æ’ä»¶é…ç½®

å¦‚æœè¿˜æ²¡æœ‰æ·»åŠ  Rsdoctor æ’ä»¶ï¼Œé‚£ä¹ˆéœ€è¦åœ¨é¡¹ç›®ä¸­é…ç½®ï¼Œ[ğŸ‘‰ğŸ» å¿«é€Ÿå¼€å§‹](https://rsdoctor.rs/guide/start/quick-start)ã€‚

### 2. å¼€å¯ Rsdoctor å¹¶æ‰§è¡Œæœ¬åœ°æ„å»º

å¼€å¯ Rsdoctor çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œæ„å»ºã€‚**ä¸è¦ä½¿ç”¨ MCP Client å¯åŠ¨é¡¹ç›®ï¼Œå› ä¸º Rsdoctor æŒ‚è½½çš„æœ¬åœ°æœåŠ¡ä¼šå¡ä½ MCP Client çš„å¯¹è¯è¿›ç¨‹**ã€‚

```bash
# å¼€å¯ Rsdoctor

RSDOCTOR=true npm run build
```

- æ³¨ï¼šå¦‚æœé…ç½®äº† `disableClientServer: true`ï¼Œéœ€è¦ä¿®æ”¹ä¸º `disableClientServer: false`ï¼ŒdisableClientServer é»˜è®¤æ˜¯ falseã€‚

### 3. å¯åŠ¨ MCP Server

#### Cursor

1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.cursor/mcp.json`ï¼š

```json
{
  "mcpServers": {
    "rsdoctor": {
      "command": "npx",
      "args": ["-y", "@rsdoctor/mcp-server@latest"]
    }
  }
}
```

2. é‡å¯ Cursor ç¼–è¾‘å™¨
3. åœ¨ MCP é¢æ¿ä¸­å¼€å§‹äº¤äº’

#### GitHub Copilot

1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.vscode/mcp.json`ï¼ŒGitHub Copilot é»˜è®¤ä¼šè‡ªåŠ¨åŠ è½½ MCP Server é…ç½®

```json
{
  "mcpServers": {
    "rsdoctor": {
      "command": "npx",
      "args": ["-y", "@rsdoctor/mcp-server@latest"]
    }
  }
}
```

2. åœ¨ Copilot Chat é¢æ¿ä¸­é€‰æ‹© [Agent æ¨¡å¼](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_use-agent-mode)ï¼Œç„¶åå¼€å§‹äº¤äº’ã€‚

#### Claude

åœ¨ `claude_desktop_config.json` ä¸­æ·»åŠ é…ç½®ï¼š

```json
{
  "mcpServers": {
    "rsdoctor": {
      "command": "npx",
      "args": ["-y", "@rsdoctor/mcp-server@latest"]
    }
  }
}
```

#### Cline

åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "rsdoctor": {
      "command": "npx",
      "args": ["-y", "@rsdoctor/mcp-server@latest"]
    }
  }
}
```

#### Trae

å¯åœ¨ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€- ã€ŒMCPã€-ã€Œæ·»åŠ ã€-ã€Œæ‰‹åŠ¨æ·»åŠ ã€ä¸­é…ç½®æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "rsdoctor": {
      "command": "npx",
      "args": ["-y", "@rsdoctor/mcp-server@latest"]
    }
  }
}
```

ç›®å‰å·²åœ¨ Trae CN MCP å¸‚åœºä¸­å‘å¸ƒï¼Œé™¤äº†æ‰‹åŠ¨é…ç½®å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¸‚åœºæœç´¢ ã€Œrsdoctor-mcpã€è¿›è¡Œæ·»åŠ å¹¶ä½¿ç”¨ã€‚

<img
  src="https://assets.rspack.rs/others/assets/rsdoctor/trae-mcp.png"
  alt="trae-mcp"
  style={{
    width: '90%',
    height: 'auto',
    maxHeight: '50vh',
    objectFit: 'cover',
    display: 'block',
  }}
/>

## é…ç½®è¯´æ˜

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•°       | è¯´æ˜                   | é»˜è®¤å€¼                                                      | ç¤ºä¾‹             |
| ---------- | ---------------------- | ----------------------------------------------------------- | ---------------- |
| `compiler` | æŒ‡å®šè¦åˆ†æçš„ç¼–è¯‘å™¨åç§° | è‡ªåŠ¨æ£€æµ‹                                                    | `--compiler web` |
| `port`     | æŒ‡å®š MCP Server ç«¯å£   | æœ€æ–°å¯åŠ¨çš„ç«¯å£å·ï¼ˆå†™å…¥åˆ° ` ~/.cache/rsdoctor/mcp.json` ä¸­ï¼‰ | `--port 1000`    |

### å¤šç¼–è¯‘å™¨é¡¹ç›®é…ç½®

åœ¨å¤šç¼–è¯‘å™¨é¡¹ç›®ä¸­ï¼Œæ¯ä¸ªç¼–è¯‘å™¨ä¼šæœ‰ä¸€ä»½ Rsdoctor æ„å»ºåˆ†ææ•°æ®ã€‚ä½¿ç”¨ `--compiler` å‚æ•°æŒ‡å®šè¦åˆ†æçš„ç¼–è¯‘å™¨ï¼š

```bash
npx @rsdoctor/mcp-server@latest --compiler web
```

### ç«¯å£é…ç½®

1. é…ç½® MCP Server ç«¯å£ï¼š

```bash
npx @rsdoctor/mcp-server@latest --port 1000
```

2. é…ç½® Rsdoctor æœ¬åœ°æœåŠ¡ç«¯å£ï¼š

```js
new RsdoctorRspackPlugin({
  port: 9988,
});
```

## Tools ä»‹ç»

### äº§ç‰©åˆ†æå·¥å…·

| å·¥å…·                     | è¯´æ˜                 | å‚æ•°             |
| ------------------------ | -------------------- | ---------------- |
| `get_chunks`             | è·å–æ‰€æœ‰ä»£ç å—ä¿¡æ¯   | -                |
| `get_chunk_by_id`        | è·å–ç‰¹å®šä»£ç å—ä¿¡æ¯   | chunkId (Number) |
| `get_large_chunks`       | è·å–ä½“ç§¯è¿‡å¤§çš„ä»£ç å— | -                |
| `get_media_asset_prompt` | è·å–åª’ä½“èµ„æºä¼˜åŒ–å»ºè®® | -                |

### ä¾èµ–åˆ†æå·¥å…·

| å·¥å…·                       | è¯´æ˜             | å‚æ•°                |
| -------------------------- | ---------------- | ------------------- |
| `get_modules`              | è·å–æ‰€æœ‰æ¨¡å—ä¿¡æ¯ | -                   |
| `get_module_by_id`         | è·å–æ¨¡å—ä¿¡æ¯     | moduleId (Number)   |
| `get_module_by_path`       | æ ¹æ®è·¯å¾„è·å–æ¨¡å— | modulePath (String) |
| `get_module_issuer_path`   | è·å–æ¨¡å—æ¥æºè·¯å¾„ | moduleId (String)   |
| `get_package_info`         | è·å–åŒ…ä¿¡æ¯       | -                   |
| `get_package_dependencies` | è·å–ä¾èµ–åˆ—è¡¨     | -                   |
| `get_duplicate_packages`   | è·å–é‡å¤åŒ…åˆ—è¡¨   | -                   |
| `get_similar_packages`     | è·å–ç›¸ä¼¼åŒ…åˆ—è¡¨   | -                   |

### æ€§èƒ½åˆ†æå·¥å…·

| å·¥å…·                        | è¯´æ˜                     | å‚æ•° |
| --------------------------- | ------------------------ | ---- |
| `get_loader_time_all_files` | è·å–æ–‡ä»¶ loader è€—æ—¶     | -    |
| `get_loader_times`          | è·å–ç¼–è¯‘ç›®å½• loader è€—æ—¶ | -    |
| `get_rule_info`             | è·å–æ„å»ºè§„åˆ™æ‰«æç»“æœ     | -    |

## å¸¸è§é—®é¢˜

### 1. è¿æ¥é—®é¢˜

**é—®é¢˜**: æ— æ³•è¿æ¥åˆ° Rsdoctor MCP Server æˆ–æ²¡æœ‰æˆåŠŸè¿”å›æ•°æ®

**è§£å†³æ–¹æ¡ˆ**:

- ç¡®ä¿ Rsdoctor æœ¬åœ° Server å·²æˆåŠŸå¯åŠ¨ã€‚
  - æ‰‹åŠ¨å¯åŠ¨æœ¬åœ° Serverï¼Œè¯·å‹¿ä½¿ç”¨ MCP Client å¯åŠ¨é¡¹ç›®ï¼Œå› ä¸º Rsdoctor çš„æŒ‚è½½çš„æœ¬åœ°æœåŠ¡ä¼šå¡ä½ MCP Client çš„å¯¹è¯è¿›ç¨‹ã€‚
- å¦‚æœ Rsdoctor MCP server ä½¿ç”¨äº† `--port` å‚æ•°ï¼Œè¯·ç¡®ä¿ Rsdoctor çš„å¯åŠ¨ç«¯å£é…ç½®æ­£ç¡®ã€‚
- æ£€æŸ¥ Rsdoctor æ’ä»¶ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚[ç‰ˆæœ¬è¦æ±‚](/guide/start/mcp#-%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82)
