## ç¬¬äºŒæ­¥ï¼šæ³¨å†Œæ’ä»¶

ä¾èµ–å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­æ¥å…¥ Rsdoctor æ’ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§å·¥å…·å’Œæ¡†æ¶çš„ç¤ºä¾‹ï¼š

### Rspack é¡¹ç›®

åœ¨ `rspack.config.js` çš„ [plugins](https://www.rspack.rs/config/plugins.html#plugins) ä¸­åˆå§‹åŒ– RsdoctorRspackPlugin æ’ä»¶ï¼Œå‚è€ƒï¼š

```js title="rspack.config.js"
const { RsdoctorRspackPlugin } = require('@rsdoctor/rspack-plugin');

module.exports = {
  // ...
  plugins: [
    // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
    process.env.RSDOCTOR &&
      new RsdoctorRspackPlugin({
        // æ’ä»¶é€‰é¡¹
      }),
  ].filter(Boolean),
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

### Rsbuild é¡¹ç›®

Rsbuild å†…ç½®äº†å¯¹ Rsdoctor çš„æ”¯æŒï¼Œä¸éœ€è¦æ‰‹åŠ¨æ³¨å†Œæ’ä»¶ã€‚è¯¦è§ [Rsbuild - ä½¿ç”¨ Rsdoctor](https://rsbuild.rs/zh/guide/debug/rsdoctor)ã€‚

### Webpack é¡¹ç›®

åœ¨ `webpack.config.js` çš„ [plugins](https://webpack.js.org/configuration/plugins/#plugins) ä¸­åˆå§‹åŒ– RsdoctorWebpackPlugin æ’ä»¶ï¼Œå‚è€ƒï¼š

```js title="webpack.config.js"
const { RsdoctorWebpackPlugin } = require('@rsdoctor/webpack-plugin');

module.exports = {
  // ...
  plugins: [
    // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
    process.env.RSDOCTOR &&
      new RsdoctorWebpackPlugin({
        // æ’ä»¶é€‰é¡¹
      }),
  ].filter(Boolean),
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

### Modern.js é¡¹ç›®

åœ¨ `modern.config.ts` çš„ [tools.bundlerChain](https://modernjs.dev/configure/app/tools/rspack) ä¸­åˆå§‹åŒ–æ’ä»¶ï¼Œå‚è€ƒï¼š

```ts title="modern.config.ts"
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

export default {
  // ...
  tools: {
    rspack(config, { appendPlugins }) {
      // ä»…åœ¨ RSDOCTOR ä¸º true æ—¶æ³¨å†Œæ’ä»¶ï¼Œå› ä¸ºæ’ä»¶ä¼šå¢åŠ æ„å»ºè€—æ—¶
      if (process.env.RSDOCTOR) {
        appendPlugins(
          new RsdoctorRspackPlugin({
            // æ’ä»¶é€‰é¡¹
          }),
        );
      }
    },
  },
};
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

:::tip
å¯¹äºä½¿ç”¨ Modern.js webpack æ¨¡å¼çš„é¡¹ç›®ï¼Œè¯·ä½¿ç”¨ [tools.webpack](https://modernjs.dev/configure/app/tools/webpack) æ³¨å†Œ `RsdoctorWebpackPlugin` æ’ä»¶ã€‚
:::

### Next.js é¡¹ç›®

#### ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œ Rsdoctor æ’ä»¶

åœ¨ `next.config.ts` çš„ [Rspack é…ç½®](https://rspack.rs/guide/tech/next)([webpack é…ç½®](https://nextjs.org/docs/pages/api-reference/config/next-config-js/webpack)) ä¸­åˆå§‹åŒ– [RsdoctorRspackPlugin](#rspack-%E9%A1%B9%E7%9B%AE)ï¼ˆ[RsdoctorWebpackPlugin](#webpack-%E9%A1%B9%E7%9B%AE)ï¼‰ æ’ä»¶ã€‚

import { Tab, Tabs } from '@rspress/core/theme';

<Tabs>
<Tab label="Rspack">

```ts title="next.config.ts"
import type { NextConfig } from 'next';
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

const nextConfig: NextConfig = {
  /* config options here */
  webpack: (config) => {
    if (config.name === 'client') {
      config.plugins.push(
        new RsdoctorRspackPlugin({
          disableClientServer: true,
        }),
      );
    } else if (config.name === 'server') {
      config.plugins.push(
        new RsdoctorRspackPlugin({
          disableClientServer: true,
          output: {
            reportDir: './.next/server',
          },
        }),
      );
    }
    return config;
  },
};

export default nextConfig;
```

</Tab>

<Tab label="webpack">

```ts title="next.config.ts"
import type { NextConfig } from 'next';
import { RsdoctorWebpackPlugin } from '@rsdoctor/webpack-plugin';

const nextConfig: NextConfig = {
  /* config options here */
  webpack: (config) => {
    if (config.name === 'client') {
      config.plugins.push(
        new RsdoctorWebpackPlugin({
          disableClientServer: true,
        }),
      );
    } else if (config.name === 'server') {
      config.plugins.push(
        new RsdoctorWebpackPlugin({
          disableClientServer: true,
          output: {
            reportDir: './.next/server',
          },
        }),
      );
    }
    return config;
  },
};

export default nextConfig;
```

</Tab>
</Tabs>

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

#### ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ„å»º

æ‰§è¡Œ **build** å‘½ä»¤ï¼ŒRsdoctor ä¼šåœ¨æœ¬åœ°ä»“åº“äº§ç‰©ä¸­ç”Ÿæˆå¯¹åº”çš„æŠ¥å‘Šæ•°æ®ã€‚

import { PackageManagerTabs } from '@theme';

<PackageManagerTabs command="run build" />

#### ç¬¬ä¸‰æ­¥ï¼šæ‰“å¼€æŠ¥å‘Š

å®‰è£… [@rsdoctor/cli](/guide/start/cli) åï¼Œ**package.json** é‡Œæ·»åŠ å¦‚ä¸‹ scripts å‘½ä»¤ï¼Œæ‰§è¡Œ **client:rsd** æˆ–è€… **server:rsd** å¯æ‰“å¼€å¯¹åº”æ„å»ºå™¨çš„æŠ¥å‘Šï¼š

<PackageManagerTabs command="add @rsdoctor/cli -D" />

```ts
  "scripts": {
    "client:rsd": "rsdoctor analyze --profile .next/.rsdoctor/manifest.json", // Rsdoctor's client report path
    "server:rsd": "rsdoctor analyze --profile .next/server/.rsdoctor/manifest.json" // Rsdoctor's server report path
  }
```

#### ğŸ“¢ Next.js é¡¹ç›®ä½¿ç”¨æ³¨æ„

Next.js åœ¨ `build` æ‰§è¡Œç»“æŸåä¼šç»ˆæ­¢ç»ˆç«¯æœåŠ¡ï¼Œå¯¼è‡´ Rsdoctor åœ¨æ„å»ºè¿‡ç¨‹ä¸­è¿è¡Œçš„æŠ¥å‘Šé¡µé¢æœåŠ¡å™¨å…³é—­ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ [@rsdoctor/cli](/guide/start/cli) é‡æ–°æ‰“å¼€æŠ¥å‘Šé¡µé¢ï¼Œæ— éœ€é‡æ–°æ‰§è¡Œæ„å»ºæ“ä½œã€‚å…·ä½“æ–¹æ³•è§[ç¬¬ä¸‰æ­¥](#%E7%AC%AC%E4%B8%89%E6%AD%A5%E6%89%93%E5%BC%80%E6%8A%A5%E5%91%8A)æˆ–æœ¬åœ°æ‰§è¡Œ rsdoctor å‘½ä»¤ï¼š

ä¾‹å¦‚ Rsdoctor çš„æ„å»ºäº§ç‰©åœ¨ `.next/server/chunks/.rsdoctor/manifest.json` è·¯å¾„ï¼Œåˆ™å¯é€šè¿‡æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥æ‰“å¼€æŠ¥å‘Šé¡µé¢ï¼š

```bash
rsdoctor analyze --profile .next/server/chunks/.rsdoctor/manifest.json

```

### Vue é¡¹ç›®

åœ¨é…ç½®æ–‡ä»¶ä¸­åˆå§‹åŒ– `@rsdoctor/webpack-plugin` æˆ– `@rsdoctor/rspack-plugin` æ’ä»¶ï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨ rsbuild é¡¹ç›®ä½œä¸ºç¤ºä¾‹ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

export default defineConfig({
  plugins: [pluginVue()],
  performance: {
    buildCache: false,
  },
  tools: {
    bundlerChain: (chain, { CHAIN_ID }) => {
      chain.plugin('Rsdoctor').use(RsdoctorRspackPlugin, [
        {
          // æ’ä»¶é€‰é¡¹
        },
      ]);
    },
  },
});
```

- **Options:** æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚

---

## ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ„å»º

ç°åœ¨ä½ å¯ä»¥åœ¨é¡¹ç›®å†…æ‰§è¡Œ **build** å‘½ä»¤ï¼Œåœ¨å®Œæˆæ„å»ºåï¼ŒRsdoctor ä¼šè‡ªåŠ¨æ‰“å¼€æœ¬æ¬¡æ„å»ºçš„åˆ†æé¡µé¢ã€‚

```bash
# å¼€å¯ Rsdoctor
RSDOCTOR=true npm run build

# æœªå¼€å¯ Rsdoctor
npm run build
```

:::tip
Rsdoctor æ’ä»¶æä¾›äº†ä¸€äº›é…ç½®é¡¹ï¼Œè¯·å‚è€ƒ [Options](../../config/options/options)ã€‚
:::
